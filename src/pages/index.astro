---
// Ğ¤Ñ€Ğ¾Ğ½Ñ‚Ğ¼Ğ°Ñ‚Ñ‚ĞµÑ€ (SSR/SSG ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚)
import styles from "@/styles/global.css";
import MealCard from '@/components/MealCard.astro';
import CalorieCalculator from '@/components/CalorieCalculator.astro';
import Lightbox from '@/components/Lightbox.astro';

// Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ğ´Ğ»Ñ SSR Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ° MealCard.
const mealsData = [
Â  {
Â  Â  name: "ĞšÑƒÑ€Ğ¸Ñ†Ğ° + Ğ¾Ğ²Ğ¾Ñ‰Ğ¸",
Â  Â  type: "protein",
Â  Â  kcal: 420,
Â  Â  p: 42,
Â  Â  f: 8,
Â  Â  c: 20,
Â  Â  img: "/images/chicken-free.webp"
Â  },
Â  {
Â  Â  name: "Ğ’ĞµĞ³Ğ°Ğ½ Ğ±Ğ¾ÑƒĞ»",
Â  Â  type: "vegan",
Â  Â  kcal: 360,
Â  Â  p: 18,
Â  Â  f: 12,
Â  Â  c: 45,
Â  Â  img: "/images/vegan-free.webp"
Â  },
Â  {
Â  Â  name: "Ğ›Ğ¾ÑĞ¾ÑÑŒ + Ğ¾Ğ²Ğ¾Ñ‰Ğ¸",
Â  Â  type: "lowcarb",
Â  Â  kcal: 390,
Â  Â  p: 34,
Â  Â  f: 26,
Â  Â  c: 8,
Â  Â  img: "/images/salmon-free.webp"
Â  },
Â  {
Â  Â  name: "Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ-Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ",
Â  Â  type: "protein",
Â  Â  kcal: 450,
Â  Â  p: 35,
Â  Â  f: 15,
Â  Â  c: 30,
Â  Â  img: "/images/sport-free.webp"
Â  }
]; // <-- Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‰Ğ°Ñ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞºĞ¾Ğ±ĞºĞ°
---

<!DOCTYPE html>
<html lang="ru">
Â  <head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>FitFood â€” Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼ Ğ¸ Ñ„Ğ¸Ñ‚Ğ½ĞµÑ</title>
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
Â  Â  <link rel="stylesheet" href="/src/styles/global.css" />
Â  </head>
Â  <body>

Â  Â  <header id="hero" style="background-image: url('/images/hero-free.webp')">
Â  Â  Â  <h1>Ğ•Ğ´Ğ° Ğ´Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼Ñ‹</h1>
Â  Â  Â  <p>ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼. Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ. ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹.</p>
Â  Â  Â  <button class="btn" onclick="scrollToCalc()">Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¸</button>
Â  Â  </header>

Â  Â  <section id="calc">
Â  Â  Â  <h2 style="text-align:center;margin-bottom:20px">ğŸ§® ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹</h2>
Â  Â  Â  <CalorieCalculator />
Â  Â  </section>

Â  Â  <section>
Â  Â  Â  <h2 style="text-align:center;margin-bottom:20px">ğŸ½ï¸ Ğ‘Ğ»ÑĞ´Ğ°</h2>

Â  Â  Â  <div class="filters">
Â  Â  Â  Â  <button class="btn" onclick="filterMeals('all')">Ğ’ÑĞµ</button>
Â  Â  Â  Â  <button class="btn" onclick="filterMeals('protein')">Ğ‘ĞµĞ»Ğ¾Ğº</button>
Â  Â  Â  Â  <button class="btn" onclick="filterMeals('vegan')">Ğ’ĞµĞ³Ğ°Ğ½</button>
Â  Â  Â  Â  <button class="btn" onclick="filterMeals('lowcarb')">Low-Carb</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="meals" id="meals">
Â  Â  Â  Â  {mealsData.map(meal => (
Â  Â  Â  Â  Â  <MealCard {...meal} />
Â  Â  Â  Â  ))}
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <footer>Â© 2025 FitFood</footer>

Â  Â  <Lightbox />

Â  Â  <script>
Â  Â  Â  // ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯: Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğ¼Ğ°Ñ‚Ñ‚ĞµÑ€Ğ° Ğ´Ğ»Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ JS
Â  Â  Â  const mealsData = ${JSON.stringify(mealsData)};

Â  Â  Â  const mealsEl = document.getElementById("meals");

Â  Â  Â  function renderMeals(type = "all") {
Â  Â  Â  Â  mealsEl.innerHTML = "";
Â  Â  Â  Â  mealsData.forEach(m => {
Â  Â  Â  Â  Â  if (type !== "all" && m.type !== type) return;

Â  Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  Â  card.className = "meal";
Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  <img src="${m.img}" onclick="openLightbox('${m.img}')">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <h3>${m.name}</h3>
Â  Â  Â  Â  Â  Â  Â  <p>${m.kcal} ĞºĞºĞ°Ğ» â€¢ Ğ‘:${m.p} Ğ–:${m.f} Ğ£:${m.c}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  mealsEl.appendChild(card);
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  renderMeals();

Â  Â  Â  function filterMeals(type) {
Â  Â  Â  Â  renderMeals(type);
Â  Â  Â  }

Â  Â  Â  /* CALCULATOR */
Â  Â  Â  function calc() {
Â  Â  Â  Â  const w = +document.getElementById("w").value;
Â  Â  Â  Â  const h = +document.getElementById("h").value;
Â  Â  Â  Â  const a = +document.getElementById("a").value;
Â  Â  Â  Â  const r = document.getElementById("res");

Â  Â  Â  Â  if (!w || !h || !a) {
Â  Â  Â  Â  Â  r.innerText = "Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ Ğ²ÑĞµ Ğ¿Ğ¾Ğ»Ñ";
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  r.innerText = `â‰ˆ ${Math.round((10 * w + 6.25 * h - 5 * a + 5) * 1.55)} ĞºĞºĞ°Ğ» / Ğ´ĞµĞ½ÑŒ`;
Â  Â  Â  }

Â  Â  Â  function scrollToCalc() {
Â  Â  Â  Â  document.getElementById("calc").scrollIntoView({ behavior: "smooth" });
Â  Â  Â  }

Â  Â  Â  /* LIGHTBOX */
Â  Â  Â  const lightbox = document.getElementById("lightbox");
Â  Â  Â  const lightboxImg = document.getElementById("lightboxImg");

Â  Â  Â  function openLightbox(src) {
Â  Â  Â  Â  lightboxImg.src = src;
Â  Â  Â  Â  lightbox.classList.add("active");
Â  Â  Â  }

Â  Â  Â  function closeLightbox() {
Â  Â  Â  Â  lightbox.classList.remove("active");
Â  Â  Â  Â  lightboxImg.src = "";
Â  Â  Â  }

Â  Â  Â  document.addEventListener("keydown", e => {
Â  Â  Â  Â  if (e.key === "Escape") closeLightbox();
Â  Â  Â  });
Â  Â  </script>
Â  </body>
</html>
