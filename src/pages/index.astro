---
// Ğ¤Ñ€Ğ¾Ğ½Ñ‚Ğ¼Ğ°Ñ‚Ñ‚ĞµÑ€ (SSR/SSG ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚)
import '../styles/global.css'; // Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ ÑÑ‚Ğ¸Ğ»ĞµĞ¹
import MealCard from '../components/MealCard.astro'; 
import CalorieCalculator from '../components/CalorieCalculator.astro'; 
import Lightbox from '../components/Lightbox.astro'; 

// Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ SSR (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ´ĞµÑÑŒ)
const mealsData = [
Â {
Â  name:"ĞšÑƒÑ€Ğ¸Ñ†Ğ° + Ğ¾Ğ²Ğ¾Ñ‰Ğ¸", type:"protein", kcal:420,p:42,f:8,c:20, img:"/images/chicken-free.webp"
Â },
Â {
Â  name:"Ğ’ĞµĞ³Ğ°Ğ½ Ğ±Ğ¾ÑƒĞ»", type:"vegan", kcal:360,p:18,f:12,c:45, img:"/images/vegan-free.webp"
Â },
Â {
Â  name:"Ğ›Ğ¾ÑĞ¾ÑÑŒ + Ğ¾Ğ²Ğ¾Ñ‰Ğ¸", type:"lowcarb", kcal:390,p:34,f:26,c:8, img:"/images/salmon-free.webp"
Â },
Â {
Â  name:"Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ-Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ", type:"protein", kcal:450,p:35,f:15,c:30, img:"/images/sport-free.webp"
Â }
];
---

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>FitFood â€” Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼ Ğ¸ Ñ„Ğ¸Ñ‚Ğ½ĞµÑ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>

<header id="hero" style="background-image:url(/images/hero-free.webp)">
Â  <h1>Ğ•Ğ´Ğ° Ğ´Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼Ñ‹</h1>
Â  <p>ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼. Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ. ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹.</p>
Â  <button class="btn" onclick="scrollToCalc()">Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¸</button>
</header>

<section id="calc">
<h2 style="text-align:center;margin-bottom:20px">ğŸ§® ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹</h2>
<CalorieCalculator />
</section>

<section>
<h2 style="text-align:center;margin-bottom:20px">ğŸ½ï¸ Ğ‘Ğ»ÑĞ´Ğ°</h2>

<div class="meals" id="meals">
Â  {mealsData.map(meal => (
Â  Â  <MealCard {...meal} />
Â  ))}
</div>
</section>

<footer>Â© 2025 FitFood</footer>

<Lightbox />

<script>
// Ğ’ JS Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ğ¸ÑÑ‚Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ±ĞµĞ· Ğ»Ğ¸ÑˆĞ½ĞµĞ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
/* CALCULATOR */
function calc(){
Â  const w=+document.getElementById("w").value;
Â  const h=+document.getElementById("h").value;
Â  const a=+document.getElementById("a").value;
Â  const r=document.getElementById("res");

Â  if(!w||!h||!a){r.innerText="Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ Ğ²ÑĞµ Ğ¿Ğ¾Ğ»Ñ";return;}

Â  // Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° ĞœĞ¸Ñ„Ñ„Ğ»Ğ¸Ğ½Ğ° - Ğ¡Ğ°Ğ½-Ğ–ĞµĞ¾Ñ€Ğ° Ğ´Ğ»Ñ Ğ¼ÑƒĞ¶Ñ‡Ğ¸Ğ½ (ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ½Ğ°Ñ Ğ½Ğ° Ğ½Ğ¸Ğ·ĞºÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ 1.55)
Â  r.innerText=`â‰ˆ ${Math.round((10*w+6.25*h-5*a+5)*1.55)} ĞºĞºĞ°Ğ» / Ğ´ĞµĞ½ÑŒ`;
}

function scrollToCalc(){
Â  document.getElementById("calc").scrollIntoView({behavior:"smooth"});
}

/* LIGHTBOX */
const lightbox=document.getElementById("lightbox");
const lightboxImg=document.getElementById("lightboxImg");

function openLightbox(src){
Â  lightboxImg.src=src;
Â  lightbox.classList.add("active");
}

function closeLightbox(){
Â  lightbox.classList.remove("active");
Â  lightboxImg.src="";
}

document.addEventListener("keydown",e=>{
Â  if(e.key==="Escape") closeLightbox();
});
</script>

</body>
</html>
